ROPTS=-zav --no-p --chmod=u=rwX,g=rX,o= --delete --exclude=www/.htaccess --exclude=.svn --exclude=.git --exclude=*.mtt --exclude=tpl/css --exclude=www/file --exclude=*node_modules* --exclude=*.php
LANG=de

compile:
	haxe cagette.hxml

templates:
	(cd lang/$(LANG)/tpl; temploc2 -macros macros.mtt -output ../tmp/ *.mtt */*.mtt */*/*.mtt)

deploy: 
	#compile
	#css
	@make LANG=fr templates
	@make LANG=fr deploy_site deploy_tpl

deploy_site:
	rsync $(ROPTS) www antoine@198.178.126.78:/home/antoine/lemilo/
	rsync $(ROPTS) data antoine@198.178.126.78:/home/antoine/lemilo/

deploy_tpl:
	rsync $(ROPTS) lang/$(LANG) antoine@198.178.126.78:/home/antoine/lemilo/lang/

